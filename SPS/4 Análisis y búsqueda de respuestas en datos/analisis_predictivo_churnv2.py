# -*- coding: utf-8 -*-
"""Analisis_Predictivo_Churnv2.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1F-JH3MllWLgI9tz9omceLJkO8rOHrt9s

# AnÃ¡lisis Predictivo: Fuga de Clientes en Telecomunicaciones

Este cuaderno tiene como objetivo explorar un caso real de predicciÃ³n de fuga de clientes usando un Ã¡rbol de decisiÃ³n.

## Objetivo
Reflexionar sobre el uso de modelos predictivos y prescriptivos para tomar decisiones empresariales.

ğŸ“Œ **Nota:** No es necesario programar. Simplemente ejecuta las celdas y reflexiona sobre las preguntas propuestas.
"""

# Cargar librerÃ­as
import pandas as pd
import matplotlib.pyplot as plt
from sklearn.model_selection import train_test_split
from sklearn.tree import DecisionTreeClassifier
from sklearn.metrics import classification_report

# Cargar datos desde GitHub
url = "https://raw.githubusercontent.com/taruntiwarihp/dataSets/master/telecom_churn.csv"
df = pd.read_csv(url)
df.head()

"""## Â¿QuÃ© representan estos datos?
- Cada fila representa un cliente.
- Las columnas muestran informaciÃ³n sobre su uso de servicios, gastos y si se dio de baja (`Churn`).

### ğŸ’¬ ReflexiÃ³n:
Â¿QuÃ© variables crees que podrÃ­an influir mÃ¡s en que un cliente se dÃ© de baja?

### Respuesta:
Las variables que considero que mÃ¡s afectan son las siguientes; Customer service calls, ya que define un descontento debido al alto nÃºmero de interacciones suele reflejar insatisfacciÃ³n o problemas no resueltos; international plan, quienes tienen este extra pagan mÃ¡s y, si no lo utilizan, pueden sentirse frustrados por el coste adicional; Total day minutes  y cargos asociados Total day charge. ya que un uso muy elevado puede derivar en facturas inesperadamente altas; Voice mail plan, la ausencia de este servicio bÃ¡sico, o el tenerlo y no usarlo, puede seÃ±alar que el cliente no percibe valor; Total eve minutes, Total night minutes, patrones de uso desequilibrados pueden indicar insatisfacciÃ³n con la tarifa diurna o falta de flexibilidad en los planes
"""

# Preprocesamiento mÃ­nimo (automÃ¡tico)
df.drop(["State", "Area code", "Phone"], axis=1, inplace=True, errors='ignore')
df["Churn"] = df["Churn"].astype(int)
df = pd.get_dummies(df, drop_first=True)

X = df.drop("Churn", axis=1)
y = df["Churn"]
X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2, random_state=42)

# Entrenamiento y predicciÃ³n con Ã¡rbol de decisiÃ³n
model = DecisionTreeClassifier(max_depth=5, random_state=42)
model.fit(X_train, y_train)
y_pred = model.predict(X_test)

print(classification_report(y_test, y_pred))

"""### ğŸ’¬ ReflexiÃ³n:

#### ğŸ’¬ Pregunta:
- Â¿El modelo predice bien los clientes que se dan de baja?

#### Respuesta:
El modelo predice bastante bien, ya que cuenta con una alta precisiÃ³n pese a tener un punto negativo del que hablarÃ© en la siguiente pregunta.


#### ğŸ’¬ Pregunta:
- Â¿QuÃ© errores comete? Â¿QuÃ© consecuencias tendrÃ­a para la empresa?

#### Respuesta:
Los identifica muy bien, ya que tiene una alta precisiÃ³n y recall, pero en la clase 1 el 33 % de los clientes que finalmente abandonan no son detectados por el modelo lo que puede derivar en falsos positivos o falsos negativvos, y destinar recursos a casos innecesarios y no destinarlo a casos que lo requieren.


#### ğŸ’¬ Pregunta:
- Â¿PreferirÃ­as minimizar los falsos positivos o los falsos negativos?

#### Respuesta:
En un contexto de retenciÃ³n de clientes, es generalmente mÃ¡s costoso perder un cliente valioso que ofrecer un descuento o atenciÃ³n extra a quien no lo necesita.
Por tanto, priorizarÃ­a reducir los falsos negativos, es decir, incrementar el recall de la clase 1 incluso a costa de aumentar ligeramente los falsos positivos podrÃ­a ser una estrategia a seguir o al menos a plantear.

## De la predicciÃ³n a la acciÃ³n: AnÃ¡lisis prescriptivo

SupÃ³n que detectas que clientes con muchas llamadas al servicio de atenciÃ³n tienden a darse de baja.

### ğŸ’¬ ReflexiÃ³n
#### ğŸ’¬ Pregunta:
- Â¿QuÃ© acciÃ³n podrÃ­as recomendar a la empresa?

#### Respuesta:
Para reducir la fuga de clientes, es importante actuar con anticipaciÃ³n. Yo propondrÃ­a activar alertas cuando un cliente llama varias veces en poco tiempo, permitiendo que un agente especializado lo contacte y resuelva su problema de manera prioritaria, antes de que se agrave. AdemÃ¡s, enviar encuestas rÃ¡pidas despuÃ©s de cada interacciÃ³n ayuda a medir la satisfacciÃ³n y detectar puntos dÃ©biles. Por Ãºltimo, contar con agentes capacitados en retenciÃ³n permite ofrecer soluciones efectivas â€”como descuentos o cambios de planâ€” justo cuando el cliente mÃ¡s lo necesita, ademÃ¡s de tener en cuenta que estos descuentos podrÃ­an ser dentro de un varemo investigado con los datos del cliente y procesados con un modelo.


#### ğŸ’¬ Pregunta:
- Â¿CÃ³mo podrÃ­as personalizar la oferta o el servicio?

#### Respuesta:
Para mejorar la retenciÃ³n, es clave personalizar la experiencia del cliente. Por ejemplo, si alguien utiliza muchas llamadas durante el dÃ­a, se le podrÃ­a ofrecer un plan con mÃ¡s minutos o tarifa plana por un tiempo de prueba. TambiÃ©n es Ãºtil brindar atenciÃ³n prioritaria a clientes que han tenido muchos problemas, con una lÃ­nea directa y agentes capacitados para resolver rÃ¡pidamente. Y para fortalecer la lealtad, se pueden otorgar puntos cada vez que un cliente cierre una incidencia con Ã©xito, los cuales luego se canjeen por beneficios como datos extra o puntos de canje de la compaÃ±Ã­a. Para esto es prioritario un anÃ¡lisis del perfil del usuario, que hoy en dÃ­a serÃ­a mÃ¡s sencillo hacerlo a travÃ©s de la inteligencia artificial e ia.




Este tipo de anÃ¡lisis ayuda a mejorar la toma de decisiones estratÃ©gicas con base en los datos.
"""